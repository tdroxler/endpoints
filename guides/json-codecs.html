<!DOCTYPE html>
<html class="no-js" lang="eng" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JSON codecs</title>
    <link rel="stylesheet" href="../theme/css/foundation.min.css">
    <link rel="stylesheet" href="../theme/css/app.css">
     <link rel="stylesheet" href="../theme/highlight.js/styles/github-gist.css"> 
    
  </head>
  <body>
    <div class="expanded row">
      <div class="small-12 medium-12 large-12 columns align-self-top">
        <div class="row">
          
          <header class="large-12 columns align-self-top a_header">
            <div class="row">
              <div class="large-12 columns a_limited top-bar">
                <div class="top-bar-left">
                  <p>endpoints 0.7.0</p>

                </div>
                <div class="top-bar-right align-right row">
                  
                  
                    <form action="../site-search.html" method="get" class="align-right a_search">
                      <input name="q" type="search"  placeholder="Search
" >
                      <button><img alt="&#1F50D;" src="../theme/images/search.svg" /></button>
                    </form>
                  
                </div>
              </div>
            </div>
          </header>
          
          <div class="small-12 medium-12 large-12 columns align-self-top a_limited a_main">
            <div class="row">
              
              <main class="columns large-order-2 sections" id="_sections">
                
                <h1 id="json-codecs" class="a_section" data-magellan-target="json-codecs">JSON codecs<a class="a_hlink" href="#json-codecs"></a></h1>
<p>The <a href="../algebras/json-entities.html">JSON entities algebras</a> show that several options
are available to define endpoints having JSON entities. In this guide, we show
which options should be used in which case, and which interpreters are compatible
with which algebras.</p>
<h2 id="use-codecs-at-the-algebra-level" class="a_section" data-magellan-target="use-codecs-at-the-algebra-level">Use codecs at the algebra level<a class="a_hlink" href="#use-codecs-at-the-algebra-level"></a></h2>
<p>The most general algebra for defining JSON entities uses separate
types for request and response entities:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-comment">/** Type class defining how to represent the `A` information as a JSON request entity */</span>
<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">JsonRequest</span>[<span class="hljs-type">A</span>]</span>

<span class="hljs-comment">/** Type class defining how to represent the `A` information as a JSON response entity */</span>
<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">JsonResponse</span>[<span class="hljs-type">A</span>]</span></code></pre>
<a href="https://github.com/julienrf/endpoints/blob/3422bfc06a25534bda7f524697fb5a87df4b5be5/algebras/algebra/src/main/scala/endpoints/algebra/JsonEntities.scala#L23-L27" class="a_sourcelink">JsonEntities.scala</a></div></div>
<p>However, in case your endpoint definitions are interpreted in multiple ways these types
should be aligned so that requests and responses are consistently encoded, decoded and
documented by client, server and documentation interpreters. A consequence of this is that an
implicit instance of such codecs has to be available for your data types at the
definition-site of your endpoints.</p>
<p>The next sections show how to use the two families of “codec”-based <code class="hljs">JsonEntities</code> algebra
specializations: <code class="hljs">JsonEntitiesFromCodec</code> and <code class="hljs">JsonSchemaEntities</code>.</p>
<h2 id="jsonentitiesfromcodec" class="a_section" data-magellan-target="jsonentitiesfromcodec"><code class="hljs">JsonEntitiesFromCodec</code><a class="a_hlink" href="#jsonentitiesfromcodec"></a></h2>
<h3 id="algebra" class="a_section" data-magellan-target="algebra">Algebra<a class="a_hlink" href="#algebra"></a></h3>
<p>In case you don’t need to document the JSON schemas of your request and response entities, the
<code class="hljs">JsonEntitiesFromCodec</code> family of algebras is the preferred approach. These algebras fix both
the <code class="hljs">JsonRequest</code> and <code class="hljs">JsonResponse</code> types to a same (abstract) <code class="hljs">JsonCodec</code> type:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-comment">/** A JSON codec type class */</span>
<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">JsonCodec</span>[<span class="hljs-type">A</span>]</span></code></pre>
<a href="https://github.com/julienrf/endpoints/blob/3422bfc06a25534bda7f524697fb5a87df4b5be5/algebras/algebra/src/main/scala/endpoints/algebra/JsonEntities.scala#L48-L49" class="a_sourcelink">JsonEntities.scala</a></div></div>
<p>Generally, you want to use a <code class="hljs">JsonEntitiesFromCodec</code> algebra that fixes this <code class="hljs">JsonCodec</code> type to
a concrete type. An example is <code class="hljs">endpoints.algebra.playjson.JsonEntitiesFromCodec</code>, which
aligns the <code class="hljs">JsonCodec</code> type with Play’s <code class="hljs">Format</code> type:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">JsonCodec</span>[<span class="hljs-type">A</span>] </span>= <span class="hljs-type">Format</span>[<span class="hljs-type">A</span>]</code></pre>
<a href="https://github.com/julienrf/endpoints/blob/3422bfc06a25534bda7f524697fb5a87df4b5be5/algebras/algebra-playjson/src/main/scala/endpoints/algebra/playjson/JsonEntitiesFromCodec.scala" class="a_sourcelink">JsonEntitiesFromCodec.scala</a></div></div>
<p>The <a href="../algebras/json-entities.html#jsonentitiesfromcodec">JSON entities algebra</a> documentation page
shows the list of <code class="hljs">JsonEntitiesFromCodec</code> algebras that fixes the <code class="hljs">JsonCodec</code> type to a concrete type.</p>
<h3 id="interpreters" class="a_section" data-magellan-target="interpreters">Interpreters<a class="a_hlink" href="#interpreters"></a></h3>
<p>To interpret endpoints defined with such algebras, apply any interpreter named <code class="hljs">JsonEntitiesFromCodec</code>
that matches your <a href="../algebras-and-interpreters.html#interpreters">family</a> of interpreters. For instance,
if you use interpreters from the <code class="hljs">endpoints.xhr</code> package (ie. the Scala.js web interpreters), you
should use the <code class="hljs">endpoints.xhr.JsonEntitiesFromCodec</code> interpreter.</p>
<h2 id="jsonschemaentities" class="a_section" data-magellan-target="jsonschemaentities"><code class="hljs">JsonSchemaEntities</code><a class="a_hlink" href="#jsonschemaentities"></a></h2>
<h3 id="algebra-1" class="a_section" data-magellan-target="algebra-1">Algebra<a class="a_hlink" href="#algebra-1"></a></h3>
<p>The <code class="hljs">endpoints.algebra.JsonSchemaEntities</code> algebra allows you to document the JSON schema of request
and response entities (when you apply a documentation interpreter to endpoints defined with this
algebra). Both the <code class="hljs">JsonRequest</code> and <code class="hljs">JsonResponse</code> types are fixed to the
<code class="hljs">JsonSchema</code> type provided by the <a href="../algebras/json-schemas.html">JsonSchemas</a> algebra:</p>
<div class="row"><div class="a_linked small-expand columns a_xscroll a_codeblock">
<pre class="hljs"><code class="language-scala"><span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">JsonRequest</span>[<span class="hljs-type">A</span>] </span>= <span class="hljs-type">JsonSchema</span>[<span class="hljs-type">A</span>]
<span class="hljs-class"><span class="hljs-keyword">type</span> <span class="hljs-title">JsonResponse</span>[<span class="hljs-type">A</span>] </span>= <span class="hljs-type">JsonSchema</span>[<span class="hljs-type">A</span>]</code></pre>
<a href="https://github.com/julienrf/endpoints/blob/3422bfc06a25534bda7f524697fb5a87df4b5be5/algebras/algebra/src/main/scala/endpoints/algebra/JsonSchemaEntities.scala#L14-L15" class="a_sourcelink">JsonSchemaEntities.scala</a></div></div>
<h3 id="interpreters-1" class="a_section" data-magellan-target="interpreters-1">Interpreters<a class="a_hlink" href="#interpreters-1"></a></h3>
<p>To interpret endpoints defined with this algebra, pick an interpreter that matches your
<a href="../algebras-and-interpreters.html#interpreters">family</a> of interpreters and, if relevant,
the underlying JSON library to use. For instance, the
<code class="hljs">endpoints.play.server.circe.JsonSchemaEntities</code> trait is a server interpreter based
on Play framework that uses the circe JSON library.</p>

              </main>
              
              
                <div data-sticky-container class="small-12 medium-12 large-2 large-order-1 columns a_sitenav_container">
                  <nav class="a_sitenav" data-sticky data-sticky-on="large" data-anchor="_sections">
                    
                  <ul>
                     
  <li >
    
      <a href="../index.html">Introduction</a>
    
    
  </li>
  
  <li >
    
      <a href="../use-cases.html">Use Cases</a>
    
    
  </li>
  
  <li >
    
      <a href="../quick-start.html">Quick start</a>
    
    
  </li>
  
  <li >
    
      <a href="../algebras-and-interpreters.html">Algebras and interpreters</a>
    
    
  </li>
  
  <li >
    
      <a href="../design.html">Design in a nutshell</a>
    
    
  </li>
  
  <li >
    
      <a href="../guides.html">Guides</a>
    
    
  </li>
  
  <li >
    
      <a href="../comparison.html">Comparison with similar tools</a>
    
    
  </li>
  
  <li >
    
      <a href="../talks.html">Talks and Publications</a>
    
    
  </li>
 
                  </ul>
                  </nav>
                </div>
              
              
              
                <div class="small-12 medium-12 large-2 large-order-3 columns a_show-for-xlarge" data-sticky-container>
                  <nav class="a_pagenav" data-sticky data-sticky-on="large" data-anchor="_sections">
                     <header><p>On This Page</p>
</header> 
                    <ul class="vertical menu" data-magellan>
                       
  <li>
    
       <a href="#json-codecs">JSON codecs</a> 
    
    
      <ul class="vertical menu">  
  <li>
    
       <a href="#use-codecs-at-the-algebra-level">Use codecs at the algebra level</a> 
    
    
  </li>
  
  <li>
    
       <a href="#jsonentitiesfromcodec">JsonEntitiesFromCodec</a> 
    
    
      <ul class="vertical menu">  
  <li>
    
       <a href="#algebra">Algebra</a> 
    
    
  </li>
  
  <li>
    
       <a href="#interpreters">Interpreters</a> 
    
    
  </li>
  </ul>
    
  </li>
  
  <li>
    
       <a href="#jsonschemaentities">JsonSchemaEntities</a> 
    
    
      <ul class="vertical menu">  
  <li>
    
       <a href="#algebra-1">Algebra</a> 
    
    
  </li>
  
  <li>
    
       <a href="#interpreters-1">Interpreters</a> 
    
    
  </li>
  </ul>
    
  </li>
  </ul>
    
  </li>
 
                    </ul>
                  </nav>
                </div>
              
            </div>
          </div>
        </div>
      </div>
      
      <footer class="small-12 medium-12 large-12 columns align-self-bottom a_footer">
        <div class="row">
          <div class="small-12 medium-12 large-12 columns top-bar">
            <div class="top-bar-left">
              
            </div>
            <div class="top-bar-right">
              <p>Generated with <a href="https://github.com/szeiger/ornate">Ornate</a>.</p>

            </div>
          </div>
        </div>
      </footer>
    </div>
    <script src="../theme/js/jquery.min.js"></script>
    <script src="../theme/js/what-input.min.js"></script>
    <script src="../theme/js/foundation.min.js"></script>
    
    <script src="../theme/js/app.js"></script>
    
  </body>
</html>
